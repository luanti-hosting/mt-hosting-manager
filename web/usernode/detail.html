{{define "title"}}Node details{{end}}
{{define "content"}}
<h4>Status</h4>
<div class="row">
    <table class="table">
        <tr>
            <td>ID</td>
            <td>
                {{.UserNode.ID}}
            </td>
        </tr>
        <tr>
            <td>Name</td>
            <td>
                {{.UserNode.Name}}
            </td>
        </tr>
        <tr>
            <td>State</td>
            <td>
                {{block "node_state" .UserNode}}{{end}}
            </td>
        </tr>
        <tr>
            <td>Created</td>
            <td>{{formattime .UserNode.Created}} ({{daysuntil .UserNode.Created}} days ago)</td>
        </tr>
        <tr class="{{if .UserNode.ExpirationWarning}}table-warning{{end}}">
            <td>Expires</td>
            <td>
                {{formattime .UserNode.Expires}} (in {{daysuntil .UserNode.Expires}} days)
                {{if .UserNode.ExpirationWarning}}
                    <i class="fa-solid fa-triangle-exclamation" title="Expires soon!"></i>
                {{end}}
            </td>
        </tr>
        <tr>
            <td>CPU Usage</td>
            <td>
                <div class="progress">
                    <div class="progress-bar"
                        style="width: {{.UserNode.LoadPercent}}%">
                        {{.UserNode.LoadPercent}}%
                        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>Disk Usage</td>
            <td>
                {{printf "%.2f" .DiskGBUsed}}/{{printf "%.2f" .DiskGBTotal}} GB
                <div class="progress">
                    <div class="progress-bar {{if .DiskWarn}}bg-warning{{end}}{{if .DiskDanger}}bg-danger{{end}}"
                        style="width: {{.DiskPercent}}%">
                        {{.DiskPercent}}%
                        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>Memory Usage</td>
            <td>
                {{printf "%.2f" .MemoryGBUsed}}/{{printf "%.2f" .MemoryGBTotal}} GB
                <div class="progress">
                    <div class="progress-bar {{if .MemoryWarn}}bg-warning{{end}}{{if .MemoryDanger}}bg-danger{{end}}"
                        style="width: {{.MemoryPercent}}%">
                        {{.MemoryPercent}}%
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>Actions</td>
            <td>
                <form method="post">
                    {{CSRFField}}
                    <div class="btn-group">
                        {{if eq .UserNode.State "RUNNING"}}
                        <button class="btn btn-warning" type="submit" name="action" value="stop">
                            <i class="fa fa-pause"></i>
                            Stop
                        </button>
                        {{end}}
                        {{if eq .UserNode.State "STOPPED"}}
                        <button class="btn btn-success" type="submit" name="action" value="start">
                            <i class="fa fa-play"></i>
                            Start
                        </button>
                        {{end}}
                        <a class="btn btn-danger" href="{{BaseURL}}/nodes/{{.UserNode.ID}}/delete">
                            <i class="fa fa-trash"></i>
                            Delete
                        </a>
                    </div>
                </form>
            </td>
        </tr>
    </table>
</div>
<h4>Servers</h4>
<table class="table">
    <thead>
        <th>Name</th>
        <th>Created</th>
        <th>State</th>
    </thead>
    <tbody>
        <td>
            <a href="#">my-server</a>
        </td>
        <td>
            2010-10-10 20:10
        </td>
        <td>
            <div class="badge bg-info">Running</div>
        </td>
    </tbody>
</table>
<a class="btn btn-success" href="{{BaseURL}}/mtserver/create?node_id={{.UserNode.ID}}">
    <i class="fa fa-plus"></i>
    Create server
</a>
{{end}}