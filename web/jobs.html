{{define "title"}}Jobs{{end}}
{{define "content"}}
<table class="table">
    <thead>
        <th>ID</th>
        <th>Type</th>
        <th>State</th>
        <th>Message</th>
        <th>Actions</th>
    </thead>
    <tbody>
        {{range $j := .Jobs}}
        <tr>
            <td>{{$j.ID}}</td>
            <td>{{$j.Type}}</td>
            <td>
                {{if eq $j.State "CREATED"}}
                    <span class="badge text-bg-info">Created</span>
                {{end}}
                {{if eq $j.State "RUNNING"}}
                    <span class="badge text-bg-success">Running</span>
                {{end}}
                {{if eq $j.State "DONE_SUCCESS"}}
                    <span class="badge text-bg-success">Done (success)</span>
                {{end}}
                {{if eq $j.State "DONE_FAILURE"}}
                    <span class="badge text-bg-danger">Done (failure)</span>
                {{end}}
            </td>
            <td>{{$j.Message}}</td>
            <td>
                <form method="post">
                    {{CSRFField}}
                    <input type="hidden" name="job_id" value="{{$j.ID}}"/>
                    <div class="btn-group">
                        <button class="btn btn-xs btn-secondary" name="action" value="retry">
                            <i class="fa fa-repeat"></i>
                            Retry
                        </button>
                        <button class="btn btn-xs btn-warning" name="action" value="delete">
                            <i class="fa fa-close"></i>
                            Delete
                        </button>
                    </div>
                </form>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
{{end}}